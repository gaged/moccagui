#summary mocca kompilieren und installieren

Hier sollte alles stehen was zum kompilieren von mocca aus den sourcen erforderlich ist.
Wer das fertige binary nicht verwenden kann/will bzw eigene Änderungen am source code vornehmen will, ist hier richtig.

== Übersicht ==

Voraussetzungen:
  * Installiertes EMC2 2.3.4, einschließlich -dev
  * Installiertes lazarus, siehe wiki seite "lazarus"

Kompilieren und Installieren erfordert folgende Schritte
  # Source code herunterladen bzw. aktualisieren
  # Kompilieren mit makefile
  # Installieren

== Source code ==
=== herunterladen ===
  # `svn checkout http://moccagui.googlecode.com/svn/trunk/ mocca`
  # `cd mocca`
=== aktualiseren ===
Wenn das Verzeichnis mocca durch svn checkout bereits angelegt wurde, kann es mit svn update immer wieder auf den neuesten Stand aktualisiert werden. Mit -r XX auch auf eine beliebige Version XX.
  # `cd mocca`
  # `svn update [-r XX]`

== Kompilieren mit makefile ==
  # Ins src Verzeichnis wechseln: `cd src`
  # Makefile anpassen, siehe [mocca#makefile]
  # Alles kompilieren und linken: `make all`

== Installieren ==
 # Nach ../lib wechseln: `cd ../lib`
 # Mocca ausführbar machen: `chmod a+x mocca`
 # Einen symbolischen Link in /usr/bin einfügen: `sudo ln -s mocca /usr/bin/mocca`
Das letztere muss nur einmalig gemacht werden

== makefile ==

Das Makefile muss den lokalen Gegebenheiten angepasst werden.

Dies betrifft insbesondere die Pfade zu EMCDIR und ggf. zu lazarus.

Zusätzlich kann es erforderlich sein, die Include Verzeichnisse zu erweitern (Pfade ggf. anpassen).

Sollte es beim Start von Mocca zu einem X-Server Fehler kommen, so ist im Makefile die Zeile 

WM=gtk2

durch

WM=gtk

zu ersetzen und neu zu kompilieren. Ggf. müssen noch einige Libraries nachinstalliert werden, siehe Wiki Lazarus installieren.

Die Datei mocca.inc enthält einige $define direktiven. Eine davon ($DEFINE OWNGL) wird dazu verwendet das Lazarus OpenGlControl durch ein internes TGlControl zu ersetzen. Wer also Lazarus NICHT mit dem Package LazOPenGlContext.0.0.1 verwendet MUSS hier $DEFINE OWNGL definieren. 